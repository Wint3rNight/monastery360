{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mx-auto p-6">
  <a href="{% url 'archives:index' %}" class="text-sm text-gray-600 hover:underline">← Back to Archives</a>
  <h1 class="text-2xl font-bold mt-4">{{ item.title }}</h1>
  <p class="text-gray-600 mb-4">{{ item.item_type }} · {{ item.catalog_number }}</p>
  {% if item.image %}
    <img src="{{ item.image.url }}" alt="{{ item.image_alt }}" class="w-full max-w-2xl rounded shadow" />
  {% else %}
    <div class="w-full max-w-2xl rounded shadow bg-gray-100 p-12 text-center text-gray-500">No image available</div>
  {% endif %}

  <div class="mt-4 prose">
    <p>{{ item.description }}</p>
  </div>

  <div class="mt-6 flex items-center space-x-3">
    {% if item.scan %}
      <a href="{% url 'archives:item_download' item.monastery.slug item.catalog_number %}" class="inline-flex items-center gap-2 bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded shadow" data-download-url="{% url 'archives:item_download' item.monastery.slug item.catalog_number %}" data-preview="1" target="_blank" rel="noopener">View Scan</a>
      <a href="{% url 'archives:item_download' item.monastery.slug item.catalog_number %}" class="inline-flex items-center gap-2 border border-gray-300 px-4 py-2 rounded text-gray-700" data-download-url="{% url 'archives:item_download' item.monastery.slug item.catalog_number %}" data-action="download" download>Download</a>
    {% else %}
      <div class="text-sm text-gray-600">No scan available for download.</div>
    {% endif %}
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/archives-downloads.js' %}"></script>
{% endblock %}
